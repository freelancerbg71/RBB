---
import type { Locale } from '../config/affiliate';

interface Props {
  locale: Locale;
  summary: string;
  takeaways?: string[];
  pubDate: Date;
}

const { locale, summary, takeaways = [], pubDate } = Astro.props;

const labels = locale === 'fr'
  ? {
      tldr: 'En bref',
      keyTakeaways: 'Points cles',
      published: 'Publie',
    }
  : {
      tldr: 'TL;DR',
      keyTakeaways: 'Key takeaways',
      published: 'Published',
    };

const dateLocale = locale === 'fr' ? 'fr-FR' : 'en-US';
---

<div class="space-y-4 mb-6">
  <section class="rounded-2xl border border-dark-700 bg-dark-900/65 p-4 md:p-5">
    <p class="text-xs uppercase tracking-[0.18em] text-brand-300 mb-2">{labels.tldr}</p>
    <p class="text-sm md:text-base text-gray-200">{summary}</p>
    <div class="mt-3 flex flex-wrap items-center gap-x-4 gap-y-2 text-xs text-gray-400">
      <p>
        <span class="text-gray-300">{labels.published}:</span>
        {pubDate.toLocaleDateString(dateLocale, { month: 'short', day: 'numeric', year: 'numeric' })}
      </p>
    </div>
  </section>

  {takeaways.length > 0 && (
    <section class="rounded-2xl border border-brand-500/25 bg-brand-500/10 p-4 md:p-5">
      <h2 class="text-base md:text-lg font-bold text-white mb-3">{labels.keyTakeaways}</h2>
      <ul class="space-y-2">
        {takeaways.slice(0, 5).map((item) => (
          <li class="text-sm text-gray-100 flex gap-2">
            <span class="text-brand-300">-</span>
            <span>{item}</span>
          </li>
        ))}
      </ul>
    </section>
  )}
</div>
